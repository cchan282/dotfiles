#!/bin/bash

# Handle mouse clicks
case $BLOCK_BUTTON in
    1) wpctl set-mute @DEFAULT_AUDIO_SINK@ toggle ;; # left click, toggle mute
    3) wpctl set-mute @DEFAULT_AUDIO_SINK@ toggle ;; # right click, toggle mute  
    4) wpctl set-volume @DEFAULT_AUDIO_SINK@ 5%+ ;; # scroll up, increase
    5) wpctl set-volume @DEFAULT_AUDIO_SINK@ 5%- ;; # scroll down, decrease
esac

# Get current volume and mute status
volume_info=$(wpctl get-volume @DEFAULT_AUDIO_SINK@)

if echo "$volume_info" | grep -q "MUTED"; then
    echo "MUTE"
else
    # Extract volume percentage and format it
    volume=$(echo "$volume_info" | cut -d' ' -f2 | awk '{printf "%.0f%%", $1*100}')
    echo "$volume"
fi
